{
  "title": "vLLM Startup Metrics",
  "description": "Startup phase timing breakdown for vLLM model endpoints",
  "layout_type": "ordered",
  "reflow_type": "fixed",
  "widgets": [
    {
      "id": 1,
      "definition": {
        "title": "Overview",
        "background_color": "vivid_blue",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 2,
            "definition": {
              "title": "Total Startup Time (avg)",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:vllm.startup.total_to_running.duration{$endpoint_name,$model_name}",
                      "aggregator": "avg"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 1
            }
          },
          {
            "id": 3,
            "definition": {
              "title": "Scheduling Time (avg)",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:vllm.startup.scheduling.duration{$endpoint_name,$model_name}",
                      "aggregator": "avg"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 1
            }
          },
          {
            "id": 4,
            "definition": {
              "title": "Image Pull Time (avg)",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:vllm.startup.image_pull.duration{$endpoint_name,$model_name}",
                      "aggregator": "avg"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 1
            }
          },
          {
            "id": 5,
            "definition": {
              "title": "In-Container Total (avg)",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:vllm.startup.total.duration{$endpoint_name,$model_name}",
                      "aggregator": "avg"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 1
            }
          }
        ]
      }
    },
    {
      "id": 6,
      "definition": {
        "title": "K8s Startup Phases (Event Watcher)",
        "background_color": "vivid_green",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 7,
            "definition": {
              "title": "K8s Phase Breakdown Over Time",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {"alias": "Scheduling", "formula": "query1"},
                    {"alias": "Image Pull", "formula": "query2"},
                    {"alias": "Container Create", "formula": "query3"},
                    {"alias": "Container Start", "formula": "query4"}
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:vllm.startup.scheduling.duration{$endpoint_name,$model_name}"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "avg:vllm.startup.image_pull.duration{$endpoint_name,$model_name}"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query3",
                      "query": "avg:vllm.startup.container_create.duration{$endpoint_name,$model_name}"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query4",
                      "query": "avg:vllm.startup.container_start.duration{$endpoint_name,$model_name}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "bars"
                }
              ]
            }
          },
          {
            "id": 8,
            "definition": {
              "title": "Total K8s Startup Time (Pod Creation â†’ Running)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": ["avg", "min", "max", "value"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {"alias": "Avg", "formula": "query1"},
                    {"alias": "Max", "formula": "query2"}
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:vllm.startup.total_to_running.duration{$endpoint_name,$model_name}"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "max:vllm.startup.total_to_running.duration{$endpoint_name,$model_name}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "warm",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            }
          }
        ]
      }
    },
    {
      "id": 9,
      "definition": {
        "title": "In-Container Startup Phases",
        "background_color": "vivid_purple",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 10,
            "definition": {
              "title": "In-Container Phase Breakdown",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {"alias": "S3 Download", "formula": "query1"},
                    {"alias": "vLLM Init", "formula": "query2"}
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:vllm.startup.download.duration{$endpoint_name,$model_name}"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "avg:vllm.startup.vllm_init.duration{$endpoint_name,$model_name}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "bars"
                }
              ]
            }
          },
          {
            "id": 11,
            "definition": {
              "title": "In-Container Total Startup Time",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": ["avg", "min", "max", "value"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {"alias": "Avg", "formula": "query1"},
                    {"alias": "Max", "formula": "query2"}
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:vllm.startup.total.duration{$endpoint_name,$model_name}"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "max:vllm.startup.total.duration{$endpoint_name,$model_name}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "purple",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            }
          }
        ]
      }
    },
    {
      "id": 12,
      "definition": {
        "title": "Top Lists",
        "background_color": "vivid_orange",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 13,
            "definition": {
              "title": "Slowest Endpoints (Avg Total Startup)",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "limit": {"count": 10, "order": "desc"}
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:vllm.startup.total_to_running.duration{$endpoint_name,$model_name} by {endpoint_name}",
                      "aggregator": "avg"
                    }
                  ],
                  "response_format": "scalar"
                }
              ]
            }
          },
          {
            "id": 14,
            "definition": {
              "title": "Slowest Models (Avg Total Startup)",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "limit": {"count": 10, "order": "desc"}
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:vllm.startup.total_to_running.duration{$endpoint_name,$model_name} by {model_name}",
                      "aggregator": "avg"
                    }
                  ],
                  "response_format": "scalar"
                }
              ]
            }
          }
        ]
      }
    }
  ],
  "template_variables": [
    {
      "name": "endpoint_name",
      "prefix": "endpoint_name",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "model_name",
      "prefix": "model_name",
      "available_values": [],
      "default": "*"
    }
  ],
  "notify_list": []
}
